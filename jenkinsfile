pipeline {
agent any
stages{
stage('clone repo'){
steps {
cleanWs()
bat "git clone https://github.com/MedHammedi/JenkPipeline"
}}
stage('Build and Test'){
steps{ 
bat "mvn install -f JenkPipeline"
}}
stage('Deploy'){
steps {
bat "mvn package -f JenkPipeline"
bat "mvn deploy -f JenkPipeline"
bat "mvn sonar:sonar -f JenkPipeline"
} }
stages {
        stage('Send Mail') {
            steps {
                echo "Ok"
            }
        }
    }
 post {
        always {
            emailext body: 'mail sent on build', recipientProviders: [[$class: 'DevelopersRecipientProvider'], [$class: 'RequesterRecipientProvider']], subject: 'Build notification'
        }
    }

}}
